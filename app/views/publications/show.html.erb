<p id="notice"><%= notice %></p>

<%= link_to 'Edit', edit_publication_path(@publication) %> |
<%= link_to 'Back', publications_path %>


<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Publication</title>
</head>
<body>
  <div class="container">
    <section class="show-property">
      <%= link_to 'Volver a Avisos', publications_path %>
      <div class="row">
        <div class="col-md-12 text-center">
          <p id="notice"><%= notice %></p>
          <h2><%= @publication.title %></h2>
        </div>

        <!--
        <div class="row">
          <div class="col-md-4 show-information">
            <%= image_tag 'ubication.png', class: 'img-ico-show' %>
            <%= @publication.region.name unless @publication.region_id.nil? %>
          </div>
          <div class="col-md-4 show-information">
            <%= image_tag 'location.png', class: 'img-ico-show' %>
            <%= @publication.commune.name unless @publication.commune_id.nil? %>
          </div>
          <div class="col-md-4 show-information">
            <%= image_tag 'dollar.png', class: 'img-ico-show-dollar' %>
            <strong><%= @publication.price unless @publication.price.nil? %></strong>
          </div>
        </div>
        -->

      </div>
      <br><br>
      <div class="row">
        <div class="col-md-6">
          <div class="thumbnail">
            <div class="carousel-show"> 
              <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                  <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                  <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                  <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>
                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                  <% @publication_attachments.each_with_index do |element, index| %>
                  <% if index == 0 %>
                  <div class="item active">
                    <%= image_tag element.photo %>
                  </div>
                  <% else %>
                  <div class="item">
                    <%= image_tag element.photo %>
                  </div> 
                  <% end %>                    
                  <% end %>    
                </div>
                <!-- Controls -->
                <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                  <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                  <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>            
            </div>
            <hr class="separator-show">
              <div class="row">
                <div class="caption">
                  <div class="col-md-5">
                    <p class="text-show-photo"><%= image_tag 'ubication.png', class: 'img-ico-show-photo' %>
                    <%= @publication.region.name unless @publication.region_id.nil? %></p>
                    <p class="text-show-photo"><%= image_tag 'location.png', class: 'img-ico-show-photo' %>
                    <%= @publication.commune.name unless @publication.region_id.nil? %></p>
                    <p class="text-show-photo"><%= image_tag 'dollar.png', class: 'img-ico-show-dollar-photo' %>
                    <%= @publication.price unless @publication.price.nil? %></p>
                  </div>
                  <div class="col-md-6">
                    <p class="text-show-photo"><%= image_tag 'user.png', class: 'img-ico-show-dollar-photo' %>
                      <%= @publication.user.name %></p>
                    <p class="text-show-photo"><%= image_tag 'email.png', class: 'img-ico-show-dollar-photo' %>
                      <%= @publication.user.email %></p>
                    <p class="text-show-photo"><%= image_tag 'cell.png', class: 'img-ico-show-dollar-photo' %>
                      <%= @publication.user.phone %></p>
                  </div>
                  <div class="col-md-1">
                    <%= image_tag(@publication.user.avatar, class: 'img-profile-show-photo') %>
                  </div>
                </div>
              </div>
            </div>
        </div>
        <div class="col-md-6">
          <div class="show-group">
            <p class="text-show-property">
              <%= image_tag 'address-ico.png', class: 'img-ico' %>
              <strong>Dirección:</strong>
              <%= @publication.address %>
            </p>
          </div>
          <div class="show-group">
            <p class="text-show-property">
              <%= image_tag 'house-ico.png', class: 'img-ico' %>
              <strong>Tipo de Inmueble:</strong>
              <%= @publication.type.name unless @publication.type_id.nil? %>
            </p>
          </div>
          <div class="show-group">
            <p class="text-show-property">
              <%= image_tag 'bedroom-ico.png', class: 'img-ico' %>
              <strong>Dormitorios:</strong>
              <%= @publication.bedroom %>
            </p>
          </div>
          <div class="show-group">
            <p class="text-show-property">
              <%= image_tag 'bath-ico.png', class: 'img-ico' %> 
              <strong>Baños:</strong>
              <%= @publication.bath %>
            </p>
          </div>
          <div class="show-group">
            <p class="text-show-property">
              <%= image_tag 'parking-ico.png', class: 'img-ico' %>
              <strong>Estacionamientos:</strong>
              <%= @publication.parking %>
            </p>
          </div>
          <div class="show-group">
            <p class="text-show-property">
              <%= image_tag 'equipment-ico.png', class: 'img-ico' %>
              <strong>Equipamiento:</strong>
              <td>
                <ul>
                  <% @publication.equipments.each do |eq|%>
                  <li class="text-show-property"><%= eq.name %></li>
                  <% end %> 
                </ul>
              </td>
            </p>
          </div>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-md-6">
          <div class="show-group-description">
            <p class="text-show-property">
              <strong>Descripción:</strong></p>
            <p class="text-show-property">
              <%= @publication.description %></p>
          </div>
          <div class="show-group">
            <p class="text-show-property">
              <strong>Ubicación:</strong></p>
            <div id="map" class="map-google"></div>

            <!-- Script Geolocalizacón -->

            <script src="https://cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>

            <script>
              function initMap(){
                handler = Gmaps.build('Google');
                handler.buildMap({
                  provider: {
                    zoom: 16,
                    center: {
                      lat: <%= @publication.latitude %>,
                      lng: <%= @publication.longitude %>
                    }
                  },
                  internal: {id: 'map'}
                }, 
                function(){
                  markers = handler.addMarkers([{
                    lat: <%= @publication.latitude %>,
                    lng: <%= @publication.longitude %>,
                    
                  }]);
                });
              };
            </script>

            <script src="https://maps.google.com/maps/api/js?key=AIzaSyChBYkswOMFSQyG39OjwXPvC8EKePxKoVc&callback=initMap" async defer></script>

            <!-- end -->

          </div>s
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <p class="text-show-property">
                <strong>Contacta al Vendedor</strong></p>
              <br>
              <div class="form-group">
                <label for="name">Nombre</label>
                <input type="text" class="form-control" id="nombre" placeholder="Ingresa tu nombre">
              </div>
              <div class="form-group">
                <label for="phone">Teléfono</label>
                <input type="phone" class="form-control" id="phone" placeholder="Ingresa tu teléfono">
              </div>
              <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input type="email" class="form-control" id="email" placeholder="Ingresa tu correo electrónico">
              </div>
              <div class="form-group">
                <button type="button" class="btn btn-success btn-sm">Enviar</button>
              </div>
            </div>
          </div> 
        </div>
      </div>
      <br>
      <br>
      <div class="row">
        <div class="col-md-4 text-center">
          <%= link_to "Aviso Anterior", @publication.prev %>
        </div>
        <div class="col-md-4 text-center">
          <%= link_to 'Volver a Avisos', publications_path %>
        </div>
        <div class="col-md-4 text-center">
          <%= link_to "Próximo Aviso", @publication.next %>
        </div>
      </div>
    </div>
  </section>
</div>
</body>
</html>







